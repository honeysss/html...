<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>createImage</title>
</head>
<body>
	<canvas id="myCanvas" width="800" height="600" style="margin: 40px auto; border: 1px solid red; display: block;"></canvas>

	<script>
		var canvas = document.getElementById('myCanvas');
		var ctx = canvas.getContext('2d');

		window.onload = function () {
			// 定义一个图片资源
			var imageData = ctx.createImageData(canvas.width, canvas.height);
			var pixelData = imageData.data;

			// for (var i = 0; i < pixelData.length; i +=4) {
			// 	pixelData[4*i + 0] = parseInt(Math.ceil(Math.random() * 255));
			// 	pixelData[4*i + 1] = parseInt(Math.ceil(Math.random() * 255));
			// 	pixelData[4*i + 2] = parseInt(Math.ceil(Math.random() * 255));
			// 	pixelData[4*i + 3] = 255;
			// }

			for (var i = 0; i < canvas.height; i ++) {
				for (var j = 0; j < canvas.width; j ++) {
					var p = i * canvas.width + j;

					pixelData[4*p + 0] = parseInt(Math.pow(Math.cos(Math.atan2(j-400, i-400)/2),2)*255);
					pixelData[4*p + 1] = parseInt(Math.pow(Math.cos(Math.atan2(j-400, i-400)/2 - 2*Math.acos(-1)/3),2)*255);
					pixelData[4*p + 2] = parseInt(Math.pow(Math.cos(Math.atan2(j-400, i-400)/2 + 2*Math.acos(-1)/3),2)*255);
					pixelData[4*p + 3] = 255;
				}
			}

			ctx.putImageData(imageData, 0, 0);

		}
	</script>
</body>
</html>